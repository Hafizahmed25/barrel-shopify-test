<header id="nav" class="nav relative flex flex-items-center fit-t fit-l w1 bg-cw z10" data-module="nav">

  {% comment %}
    Mobile Nav
    - appears below header. Fades in. Controlled by body classes.
  {% endcomment %}
  <div id="mobileNav" class="nav__mobile outer absolute pv1 bg-cw fit-l w1">
    <ul class="relative">

      {% for link in linklists.main-menu.links %}
        {% assign child_list_handle = link.title | handleize %}

        {% if linklists[child_list_handle].links != blank %}

          <li class="nav__mobile__item block pv075 mr1 has-submenu">
            <span class="nav__item__link block cg5 h6 pb075 decoration--none">{{ link.title }}</span>
            <ul class="nav__mobile__submenu">
              {% for sublink in linklists[child_list_handle].links %}
                <li><a href="{{sublink.url}}" class="block h6 pv05 decoration--none">{{sublink.title}}</a></li>
              {% endfor %}
            </ul>
          </li>

        {% else %}

          <li class="nav__mobile__item block pv075 mr1">
            <a href="{{ link.url }}" class="nav__item__link h6 decoration--none">{{ link.title }}</a>
          </li>

        {% endif %}
      {% endfor %}

      {% if shop.customer_accounts_enabled %}
        <li class="nav__mobile__item block pv075 mr1">
          <a href="/account" class="nav__item__link h6 decoration--none">Account</a>
        </li>
      {% endif %}
    </ul>
  </div>

  {% comment %}
    Search Bar
    - appears below header. Slides down. Controlled by classes on the nav__search element.
  {% endcomment %}
  <div id="searchBar" class="nav__search outer bg-c1 absolute fit-l fit-b w1 z0" data-module="search-bar">
    <form class="nav__search__form block relative w1" action="/search">
      <input class="nav__search__input ts3 block relative w1 mv0" name="q" type="text" placeholder="Search" value="{{search.terms | escape}}"/>
      <button class="hide" type="submit">Search</button>
    </form>
  </div>

  {% comment %}
    Nav Inner
    - holds desktop menu links, icons (which are present on mobile as well), and logo
    - vertically centered
  {% endcomment %}
  <div class="nav__inner flex flex-items-center flex-justify-between w1 z1 bg-cw outer">

    <a class="nav__logo inline-block" href="{{ shop.url }}">
      <img class="block w1" src="{{"logo.png" | asset_url}}" alt="Logo"/>
    </a>

    <nav class="nav__desktop inline-block mb025 flex flex-items-center flex-auto flex-justify-end">
      <ul class="list--reset inline-block flex flex-items-center">

        {% for link in linklists.main-menu.links %}
          <li class="nav__item inline-block mr1">
            <a id="{{link.title | camelcase}}" href="{{ link.url }}" class="nav__item__link h6 decoration--none pseudo-underline">{{ link.title }}</a>
          </li>
        {% endfor %}

        {% if shop.customer_accounts_enabled %}
          <li class="nav__item inline-block mr1">
            <a href="/account" class="nav__item__link h6 decoration--none pseudo-underline">Account</a>
          </li>
        {% endif %}

      </ul>
    </nav>

    <div class="flex flex-items-center">
      <div class="nav__icon relative inline-block c1 ml1">
        <a id="searchToggle" href="/search" class="block absolute fit-x mha mva no-ajax">
          <svg class="w1" viewBox="0 0 16 16">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-search" x="0" y="0"></use>
          </svg>
        </a>
      </div>

      <div class="nav__icon relative inline-block c1 ml1">
        <a href="/cart" class="block absolute fit-x mha mva">
          <svg class="w1" viewBox="0 0 50 42.2">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-cart" x="0" y="0"></use>
          </svg>
        </a>
      </div>

      <div id="mobileToggle" class="nav__mobile__toggle relative inline-block c1 ml1">
        <button>
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>

  </div>
</header>
