import{n as a}from"./index.b0574762.js";import{calculateFilters as m,parseJSON as p,decodeCollectionMeta as u}from"./util.c203a9b9.js";import"./_commonjsHelpers.725317a4.js";const P=(n,s)=>{const{collection:e,sort:o}=n();g(e,o).then(r=>{const i=m(r);r={...r,filters:i},s(r)}).catch(r=>{console.log(r)})},g=(n,s)=>l(n,s,1).then(e=>{let{pages:o}=e;if(o=Number(o),o>1){const i=[...Array(o-1).keys()].map(t=>l(n,s,t+2));return Promise.all(i).then(t=>(t.forEach(c=>{e.variants=[...e.variants,...c.variants]}),Promise.resolve(e)))}else return Promise.resolve(e)}),l=(n,s,e)=>new Promise((o,r)=>{a.ajax({url:`${n}?view=plp-endpoint&sort_by=${s}&page=${e}`},(i,t)=>{t=p(t),t.meta&&u(t.meta),o(t)})});export{P as getData};
//# sourceMappingURL=connectors.083ff3be.js.map
